{% extends "base.html" %}
{% block title %}Settings — Wireless Intel{% endblock %}
{% block content %}
<h2>Settings</h2>
<form method="post" action="/settings/save">

  <h5 class="mt-4 border-bottom pb-1">SiliconFlow <small class="text-muted fw-normal">(private.env)</small></h5>

  <div class="mb-3">
    <label class="form-label fw-semibold">SILICONFLOW_API_KEY</label>
    <input type="password" class="form-control font-monospace"
           name="SILICONFLOW_API_KEY"
           value="{{ private.get('SILICONFLOW_API_KEY', '') }}"
           autocomplete="off" placeholder="sk-...">
  </div>

  <div class="mb-3">
    <label class="form-label fw-semibold">SILICONFLOW_MODEL</label>
    <input type="text" class="form-control font-monospace"
           name="SILICONFLOW_MODEL"
           value="{{ private.get('SILICONFLOW_MODEL', '') }}"
           list="model-suggestions"
           placeholder="Pro/moonshotai/Kimi-K2.5">
    <datalist id="model-suggestions">
      <option value="Pro/moonshotai/Kimi-K2.5">
      <option value="Pro/zai-org/GLM-5">
      <option value="Pro/deepseek-ai/DeepSeek-V3">
      <option value="Pro/Qwen/Qwen3-235B-A22B">
    </datalist>
    <div class="form-text">SiliconFlow model used to generate the weekly digest. Leave blank to use the default.</div>
  </div>

  <div class="mb-3">
    <label class="form-label fw-semibold">REPORT_WEEKS</label>
    <input type="number" class="form-control" style="max-width:12rem"
           name="REPORT_WEEKS"
           value="{{ private.get('REPORT_WEEKS', '4') }}"
           min="1" max="52" placeholder="4">
    <div class="form-text">
      Number of weeks to analyse. The pipeline will fetch <code>weeks × 7</code> days
      from OpenAlex, then generate a digest covering the same window. Default: 4.
    </div>
  </div>

  <div class="mb-3">
    <label class="form-label fw-semibold">REPORT_DIR</label>
    <input type="text" class="form-control font-monospace"
           name="REPORT_DIR"
           value="{{ private.get('REPORT_DIR', '') }}"
           placeholder="e.g. C:\Users\you\Documents\reports">
    <div class="form-text">Directory where weekly digest .md files are written.</div>
  </div>

  <h5 class="mt-4 border-bottom pb-1">OpenAlex <small class="text-muted fw-normal">(openalex.env)</small></h5>

  <div class="mb-3">
    <label class="form-label fw-semibold">OPENALEX_API_KEY</label>
    <input type="password" class="form-control font-monospace"
           name="OPENALEX_API_KEY"
           value="{{ openalex.get('OPENALEX_API_KEY', '') }}"
           autocomplete="off">
  </div>

  <div class="mb-3">
    <label class="form-label fw-semibold">OPENALEX_EMAIL</label>
    <input type="email" class="form-control"
           name="OPENALEX_EMAIL"
           value="{{ openalex.get('OPENALEX_EMAIL', '') }}"
           placeholder="your@email.com">
    <div class="form-text">Used as the From: header in OpenAlex API requests (polite pool).</div>
  </div>

  <button type="submit" class="btn btn-primary">Save Settings</button>
</form>
{% endblock %}
